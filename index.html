<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>仙乐爬宠交易所</title>
    <style>
        /* 页面整体设置为深色背景和白色文字 */
        body {
            font-family: Arial, sans-serif;
            background-color: #121212;
            color: #ffffff;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
        }

        /* 表单和结果容器样式 */
        .container {
            max-width: 400px;
            width: 100%;
            background-color: #1e1e1e;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }

        h2 {
            text-align: center;
            color: #ffffff;
        }

        label {
            display: block;
            margin-top: 10px;
            color: #b0b0b0;
        }

        input, select {
            width: 100%;
            padding: 10px;
            margin-top: 5px;
            border: none;
            border-radius: 4px;
            background-color: #333333;
            color: #ffffff;
        }

        button {
            width: 100%;
            padding: 10px;
            margin-top: 20px;
            border: none;
            border-radius: 4px;
            background-color: #6200ee;
            color: #ffffff;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        button:hover {
            background-color: #3700b3;
        }

        .result-container {
            text-align: center;
            opacity: 0;
            transition: opacity 0.5s ease-in-out;
        }

        .percentage {
            font-size: 24px;
            font-weight: bold;
            margin: 10px 0;
        }

        .arrow-up {
            color: red;
        }

        .arrow-down {
            color: green;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- 表单容器 -->
        <div id="formContainer">
            <h2>仙乐爬宠交易所</h2>
            <label for="primaryType">一级种类</label>
            <select id="primaryType">
                <!-- 示例选项，实际使用时将这些替换为完整的爬宠种类列表 -->
                <option value="蜥蜴">蜥蜴</option>
                <option value="蛇">蛇</option>
                <option value="龟">龟</option>
            </select>

            <label for="secondaryType">二级种类</label>
            <select id="secondaryType">
                <!-- 示例选项，实际使用时将这些替换为完整的二级种类列表 -->
                <option value="鬃狮蜥">鬃狮蜥</option>
                <option value="绿鬣蜥">绿鬣蜥</option>
                <option value="豹纹守宫">豹纹守宫</option>
            </select>

            <label for="purchaseDate">购买时间</label>
            <input type="date" id="purchaseDate" required>

            <label for="purchasePrice">购买价格</label>
            <input type="number" id="purchasePrice" placeholder="请输入价格" required>

            <button onclick="submitForm()">提交</button>
        </div>

        <!-- 结果容器 -->
        <div id="resultContainer" class="result-container">
            <h2>爬宠理财高手</h2>
            <p class="percentage" id="bargainLevel">捡漏水平: </p>
            <p class="percentage" id="appreciationLevel">升值程度: </p>
            <p class="percentage" id="profitLevel">收益水平: </p>
        </div>
    </div>

    <script>
        function submitForm() {
            const primaryType = document.getElementById("primaryType").value;
            const secondaryType = document.getElementById("secondaryType").value;
            const purchaseDate = document.getElementById("purchaseDate").value;
            const purchasePrice = parseFloat(document.getElementById("purchasePrice").value);

            // 示例市场数据
            const marketData = {
                "蜥蜴": { "鬃狮蜥": { "当时市场平均价": 350, "当前市场平均价": 500 } },
                "蛇": { "玉米蛇": { "当时市场平均价": 150, "当前市场平均价": 200 } },
                "龟": { "红耳龟": { "当时市场平均价": 80, "当前市场平均价": 100 } }
            };

            const marketInfo = marketData[primaryType]?.[secondaryType];
            if (!marketInfo) {
                alert("请填写完整的表单。");
                return;
            }

            const averagePastPrice = marketInfo["当时市场平均价"];
            const averageCurrentPrice = marketInfo["当前市场平均价"];

            const bargainLevel = Math.round((averagePastPrice - purchasePrice) / averagePastPrice * 100);
            const appreciationLevel = Math.round((averageCurrentPrice - averagePastPrice) / averagePastPrice * 100);
            const profitLevel = Math.round((appreciationLevel / ((averageCurrentPrice - averagePastPrice) / averagePastPrice)) * 100);

            document.getElementById('bargainLevel').innerText = `捡漏水平: ${bargainLevel}%`;
            animatePercentage('bargainLevel', 0, bargainLevel);

            document.getElementById('appreciationLevel').innerHTML = `升值程度: ${appreciationLevel > 0 ? '<span class="arrow-up">↑</span>' : '<span class="arrow-down">↓</span>'}${Math.abs(appreciationLevel)}%`;
            document.getElementById('appreciationLevel').style.color = appreciationLevel > 0 ? 'red' : 'green';

            document.getElementById('profitLevel').innerText = `收益水平: ${profitLevel}%`;
            animatePercentage('profitLevel', 0, profitLevel);

            document.getElementById('formContainer').style.display = 'none';
            const resultContainer = document.getElementById('resultContainer');
            resultContainer.style.display = 'block';
            resultContainer.style.opacity = '1';
        }

        function animatePercentage(id, start, end) {
            let current = start;
            const step = (end - start) / 100;
            const interval = setInterval(function() {
                current += step;
                if (current >= end) {
                    current = end;
                    clearInterval(interval);
                }
                document.getElementById(id).innerText = `${Math.round(current)}%`;
            }, 10);
        }
    </script>
</body>
</html>
